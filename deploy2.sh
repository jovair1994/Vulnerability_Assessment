#!/bin/bash

apt update -y

apt upgrade -y 

apt install gvm

gvm-setup

gvm-start

gvm-check-setup

git clone https://github.com/TheGroundZero/openvasreporting

cd openvasreporting
pip3 install -r requirements.txt
pip3 install build --upgrade
pip3 install pip --upgrade
python -m build .

pip3 install dist/*.whl

echo "net.ipv6.conf.all.disable_ipv6 = 1" >> /etc/sysctl.conf
echo "net.ipv6.conf.default.disable_ipv6 = 1" >> /etc/sysctl.conf
sed -i 's/GRUB_CMDLINE_LINUX_DEFAULT=""/GRUB_CMDLINE_LINUX_DEFAULT="ipv6.disable=1"/' /etc/default/grub
sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX="ipv6.disable=1"/' /etc/default/grub
update-grub

hostnamectl set-hostname KALI
cat << EOF > /etc/hosts
127.0.0.1 localhost
127.0.0.1 kali
EOF

rm -rf /root/.cache
rm -rf /root/.viminfo
rm -rf /home/admin/.sudo_as_admin_successful
rm -rf /home/admin/.cache
rm -rf /home/admin/.viminfo



ln -sf /dev/null /root/.bash_history
ln -sf /dev/null /home/admin/.bash_history

reboot
